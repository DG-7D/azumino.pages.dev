---
interface PathNamePair {
    path: string;
    name: string;
}
interface Tree {
    current: PathNamePair[];
    next?: Tree;
}

let tree: Tree | undefined = {
    current: [
        {
            path: "",
            name: "あづみのメモ帳",
        },
    ],
    next: {
        current: [
            {
                path: "blog",
                name: "あづみのブログ",
            },
            {
                path: "about",
                name: "あづみについて",
            },
            {
                path: "misc",
                name: "その他",
            },
        ],
    },
};

if (Astro.url.pathname == "/") {
    // トップでは表示しない
    return;
}

let paths: string[] = Astro.url.pathname.replace(/\/$/, "").split("/");
// 自分自身を除去
paths.pop();

let pathNameList: PathNamePair[] = new Array();
let absolutePath: string = "";
for (const path of paths) {
    absolutePath = absolutePath + path + "/";
    let name = tree?.current.find(pathName => pathName.path == path)?.name ?? path;
    pathNameList.push({
        path: absolutePath,
        name: name,
    });
    tree = tree?.next;
}
---

<nav>
    <ul class="inline">
        {
            pathNameList.map(pathName => (
                <!-- display: inline -->
                <li><a href={pathName.path}>{pathName.name}</a></li>
            ))
        }
    </ul>
</nav>
<style>
    ul {
        padding: 0;
    }
    li {
        display: inline;
        margin-left: 0;
        &::after {
            content: " / " !important;
        }
        &::before {
            content: "" !important;
        }
    }
</style>
