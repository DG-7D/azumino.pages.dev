---
import BaseLayout from "@/layouts/BaseLayout.astro";
---

<BaseLayout title="æ•°å­¦ç”¨è‹±æ•°å­—è¨˜å·å¤‰æ›å™¨" description="é€šå¸¸ã®ASCIIè‹±æ•°å­—åˆ—ã‹ã‚‰æ•°å­¦ç”¨è‹±æ•°å­—è¨˜å·ã‚’ç”Ÿæˆã™ã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚">
    <p>å…¥åŠ›æ¬„ã«æ–‡å­—åˆ—ã‚’å…¥åŠ›ã™ã‚‹ã¨å„ç¨®<a href="https://ja.wikipedia.org/wiki/%E6%95%B0%E5%AD%A6%E7%94%A8%E8%8B%B1%E6%95%B0%E5%AD%97%E8%A8%98%E5%8F%B7" target="_blank">æ•°å­¦ç”¨è‹±æ•°å­—è¨˜å·</a>ã«å¤‰æ›ã•ã‚ŒãŸçµæœãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚æ•°å­—ã®æ–œä½“ã¨ãƒ•ãƒ©ã‚¯ãƒˆã‚¥ãƒ¼ãƒ«ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚è‹±æ•°ä»¥å¤–ã¯ãã®ã¾ã¾ã«ãªã‚Šã¾ã™ã€‚</p>
    <textarea id="input" autocomplete="off" autofocus placeholder="ã“ã“ã«æ–‡å­—åˆ—ã‚’å…¥åŠ›">0123456789 abcdefghijklmnopqrstuvwxyz ABCDEFGHIJKLMNOPQRSTUVWXYZ</textarea>
    <dl id="output"></dl>
</BaseLayout>
<script>
    const formats = [
        // ã‚»ãƒªãƒ•
        {
            id: "serifBold",
            friendlyName: "ã‚»ãƒªãƒ•å¤ªå­—",
            codePoint: {
                number: codePointOf("ğŸ") - codePointOf("0"),
                capital: codePointOf("ğ€") - codePointOf("A"),
                small: codePointOf("ğš") - codePointOf("a"),
            },
            exceptions: [],
        },
        {
            id: "serifItalic",
            friendlyName: "ã‚»ãƒªãƒ•æ–œä½“",
            codePoint: {
                number: 0,
                capital: codePointOf("ğ´") - codePointOf("A"),
                small: codePointOf("ğ‘") - codePointOf("a"),
            },
            exceptions: [{ from: codePointOf("h"), to: codePointOf("â„") }],
        },
        {
            id: "serifBoldItalic",
            friendlyName: "ã‚»ãƒªãƒ•å¤ªå­—æ–œä½“",
            codePoint: {
                number: codePointOf("ğŸ") - codePointOf("0"),
                capital: codePointOf("ğ‘¨") - codePointOf("A"),
                small: codePointOf("ğ’‚") - codePointOf("a"),
            },
            exceptions: [],
        },

        // ã‚µãƒ³ã‚»ãƒªãƒ•
        {
            id: "sansSerif",
            friendlyName: "ã‚µãƒ³ã‚»ãƒªãƒ•",
            codePoint: {
                number: codePointOf("ğŸ¢") - codePointOf("0"),
                capital: codePointOf("ğ– ") - codePointOf("A"),
                small: codePointOf("ğ–º") - codePointOf("a"),
            },
            exceptions: [],
        },
        {
            id: "sansSerifBold",
            friendlyName: "ã‚µãƒ³ã‚»ãƒªãƒ•å¤ªå­—",
            codePoint: {
                number: codePointOf("ğŸ¬") - codePointOf("0"),
                capital: codePointOf("ğ—”") - codePointOf("A"),
                small: codePointOf("ğ—®") - codePointOf("a"),
            },
            exceptions: [],
        },
        {
            id: "sansSerifItalic",
            friendlyName: "ã‚µãƒ³ã‚»ãƒªãƒ•æ–œä½“",
            codePoint: {
                number: codePointOf("ğŸ¢") - codePointOf("0"),
                capital: codePointOf("ğ˜ˆ") - codePointOf("A"),
                small: codePointOf("ğ˜¢") - codePointOf("a"),
            },
            exceptions: [],
        },
        {
            id: "sansSerifBoldItalic",
            friendlyName: "ã‚µãƒ³ã‚»ãƒªãƒ•å¤ªå­—æ–œä½“",
            codePoint: {
                number: codePointOf("ğŸ¬") - codePointOf("0"),
                capital: codePointOf("ğ˜¼") - codePointOf("A"),
                small: codePointOf("ğ™–") - codePointOf("a"),
            },
            exceptions: [],
        },

        // ç­†è¨˜ä½“
        {
            id: "script",
            friendlyName: "ç­†è¨˜ä½“",
            codePoint: {
                number: 0,
                capital: codePointOf("ğ’œ") - codePointOf("A"),
                small: codePointOf("ğ’¶") - codePointOf("a"),
            },
            exceptions: [
                { from: codePointOf("B"), to: codePointOf("â„¬") },
                { from: codePointOf("E"), to: codePointOf("â„°") },
                { from: codePointOf("F"), to: codePointOf("â„±") },
                { from: codePointOf("H"), to: codePointOf("â„‹") },
                { from: codePointOf("I"), to: codePointOf("â„") },
                { from: codePointOf("L"), to: codePointOf("â„’") },
                { from: codePointOf("M"), to: codePointOf("â„³") },
                { from: codePointOf("R"), to: codePointOf("â„›") },
                { from: codePointOf("e"), to: codePointOf("â„¯") },
                { from: codePointOf("g"), to: codePointOf("â„Š") },
                { from: codePointOf("o"), to: codePointOf("â„´") },
            ],
        },
        {
            id: "scriptBold",
            friendlyName: "ç­†è¨˜ä½“å¤ªå­—",
            codePoint: {
                number: codePointOf("ğŸ") - codePointOf("0"),
                capital: codePointOf("ğ“") - codePointOf("A"),
                small: codePointOf("ğ“ª") - codePointOf("a"),
            },
            exceptions: [],
        },

        // é»’æ¿å¤ªå­—
        {
            id: "blackboardBold",
            friendlyName: "é»’æ¿å¤ªå­—",
            codePoint: {
                number: codePointOf("ğŸ˜") - codePointOf("0"),
                capital: codePointOf("ğ”¸") - codePointOf("A"),
                small: codePointOf("ğ•’") - codePointOf("a"),
            },
            exceptions: [
                { from: codePointOf("C"), to: codePointOf("â„‚") },
                { from: codePointOf("H"), to: codePointOf("â„") },
                { from: codePointOf("N"), to: codePointOf("â„•") },
                { from: codePointOf("P"), to: codePointOf("â„™") },
                { from: codePointOf("Q"), to: codePointOf("â„š") },
                { from: codePointOf("R"), to: codePointOf("â„") },
                { from: codePointOf("Z"), to: codePointOf("â„¤") },
            ],
        },

        // ç­‰å¹…
        {
            id: "monoSpace",
            friendlyName: "ç­‰å¹…",
            codePoint: {
                number: codePointOf("ğŸ¶") - codePointOf("0"),
                capital: codePointOf("ğ™°") - codePointOf("A"),
                small: codePointOf("ğšŠ") - codePointOf("a"),
            },
            exceptions: [],
        },

        // ãƒ•ãƒ©ã‚¯ãƒˆã‚¥ãƒ¼ãƒ«
        {
            id: "fraktur",
            friendlyName: "ãƒ•ãƒ©ã‚¯ãƒˆã‚¥ãƒ¼ãƒ«",
            codePoint: {
                number: 0,
                capital: codePointOf("ğ”„") - codePointOf("A"),
                small: codePointOf("ğ”") - codePointOf("a"),
            },
            exceptions: [
                { from: codePointOf("C"), to: codePointOf("â„­") },
                { from: codePointOf("H"), to: codePointOf("â„Œ") },
                { from: codePointOf("I"), to: codePointOf("â„‘") },
                { from: codePointOf("R"), to: codePointOf("â„œ") },
                { from: codePointOf("Z"), to: codePointOf("â„¨") },
            ],
        },
        {
            id: "frakturBold",
            friendlyName: "ãƒ•ãƒ©ã‚¯ãƒˆã‚¥ãƒ¼ãƒ«å¤ªå­—",
            codePoint: {
                number: codePointOf("ğŸ") - codePointOf("0"),
                capital: codePointOf("ğ•¬") - codePointOf("A"),
                small: codePointOf("ğ–†") - codePointOf("a"),
            },
            exceptions: [],
        },
    ];

    const input = document.getElementById("input")! as HTMLTextAreaElement;
    const output = document.getElementById("output")!;
    const outputs: { [id: string]: HTMLElement } = {};

    for (const format of formats) {
        const dt = document.createElement("dt");
        const dd = document.createElement("dd");
        dt.textContent = format.friendlyName;
        output.insertAdjacentElement("beforeend", dt);
        output.insertAdjacentElement("beforeend", dd);
        outputs[format.id] = dd;
    }

    input.addEventListener("input", onInput);
    onInput();

    function codePointOf(char: string): number {
        return char.codePointAt(0)!;
    }
    function onInput() {
        for (const format of formats) {
            outputs[format.id]!.textContent = "";
            for (let index = 0; index < input.value.length; index++) {
                const codePoint = input.value.codePointAt(index)!;
                const exception = format.exceptions.find(exception => exception.from == codePoint);
                if (exception) {
                    outputs[format.id]!.textContent += String.fromCodePoint(exception.to);
                } else {
                    let base = range(codePoint) ? format.codePoint[range(codePoint)!] : 0;
                    outputs[format.id]!.textContent += String.fromCodePoint(base + codePoint);
                }
            }
        }
    }
    function range(codePoint: number): "number" | "capital" | "small" | undefined {
        if (codePointOf("0") <= codePoint && codePoint <= codePointOf("9")) {
            return "number";
        } else if (codePointOf("A") <= codePoint && codePoint <= codePointOf("Z")) {
            return "capital";
        } else if (codePointOf("a") <= codePoint && codePoint <= codePointOf("z")) {
            return "small";
        }
        return undefined;
    }
</script>

<style>
    textarea {
        font-family: math;
        height: calc(1lh + 0.5rem);
    }
</style>
