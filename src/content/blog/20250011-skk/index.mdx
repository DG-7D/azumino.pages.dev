---
publish: true
title: "WindowsでSKKを使ってみた"
publishDate: 2025-12-10 00:00:00 +09:00
description: "形態素解析に頼らない日本語入力システムSKKのWindows版、CorvusSKKを使ってみたらよかったのでおすすめする話。"
---

この記事はUEC Advent Calendar 2025の10日目の記事です。例のごとくその2が生えてるようです。今年も無事に誕生日の枠を確保することができました。生存権の保障された現代においてまだ寿命の心配もない小僧が、ただ戸籍上の数字が一つ増えるだけのことをイベントとして楽しめるのは、冷静に考えると面白いことです。

<OGPCard url="https://adventar.org/calendars/11571" />
<OGPCard url="https://adventar.org/calendars/11846" />

9日目の記事は５えんさんの『昔のゲーム機はどうやって音を鳴らしていたか？』でした。実は自分も昔ファミコン音源で遊んでいたことがあったのですが、「実機Chiptune」が流行ってほしいというのは完全に同意するところです。自分はそこまで辿りつきませんでしたが、できれば「実機で鳴らせる」だけでなく「実機で鳴らした」までやってみたいものですね。

<OGPCard url="https://note.com/fiveyenw/n/naef5ffa7ff1e" />

今回はﾄﾞﾍﾞｶﾚ恒例、公共の福祉指向の記事です。いくつかネタがあって迷っていたのですが、ボツネタのうち一つ、「安いからといって今P1Sを買わないほうがいい理由を実体験からまとめてみた」をすでに通常記事として上げているので、3Dプリンタに興味がある人はこちらもどうぞ。

<OGPCard url="https://dg7.dev/blog/20250010-dont-buy-p1s/" /> 

さて本題です。我々の用いる日本語をコンピュータに入力するにあたっては、ひらがなは頑張れば直接入力できるものの、漢字は入力方式エディタ(IME)によるかな漢字変換が事実上必須です。WindowsやmacOSといったOSには標準でIMEが搭載されており、Linuxでもとりあえずこれ入れろみたいに言われて無意識に使っているものと思われます。OS標準でないIMEとして、WindowsではGoogle日本語入力やATOKなどがありますが、これらを起因とするトラブルは多く、多少操作法が異なったりクセが違ったりする程度で機能的には大差ないため、基本的にOS標準のIMEを使うのが無難だと自分は思っていました。そもそもWindows標準のMicrosoft IME(以下MS-IME)は必要最低限の品質を有しており、iOSなど~~という純正のIMEはいかれてるのに非純正のキーボードは制限が強すぎて何も使えない不毛の地~~よりは圧倒的に恵まれています。

しかし、そんな「普通の」IMEとは一線を画す機能性を持つIMEとして、Emacs上で使われるSKKというものがあり、SKKベースのIMEが様々な環境で実装されています。これのWindows版を試してみたところ、基本的に純正品を重んじ余計なものは入れたくないと思っている自分でも、普段使いする価値があると感じさせられたため、設定のメモがてらご紹介いたします。

## SKKとは

SKKの最大の特徴は、変換すべき単位をユーザが明示的に指定する点にある。逆に言えば、SKK以外の大半のIMEでは、形態素解析と呼ばれる技術を用いて、入力したかな文字列を自動的に分割して変換単位を決定している。誤変換の主な原因はこの形態素解析の誤りにあり、これに頼っているという時点で大半のIMEはSKKの前では「機能的には大差ない」と言える。また、複数単位を一括で変換する以上、一発変換に失敗した単語の修正のためには「前に戻る」という動作が発生し、大きな手間となる。

SKKでは、単語や送り仮名の先頭をShiftキーを押しながら入力することでユーザが指定する。例えば、「送り」は`OkuRi`と入力する。送り仮名を把握している必要があるが、それは手書きでも同じことで、「国語」を叩き込まれた我々の頭には意外とこれが身についている。もし間違っていても、その時は変換ができないという形で気づき、学習することができる。通常のIMEでも逐一変換すれば形態素分析の間違いの可能性や手戻り量を減らすことはできるが、形態素解析は必要以上にバラバラにしてくることもあるし、最小単位での変換を前提として設計されたSKKではひらがなの変換確定が不要など余計な手間を減らすことができる。また、通常のIMEではtypoした時にも無理矢理変換を試みるうえ、それを片付けて一から入力し直すという苦行を強いられるが、SKKは辞書にないものはないとして変換せず保持されるため、修正も比較的速やかに行うことができる。

ほかの特徴として、ユーザ辞書登録のハードルがとても低いことが挙げられる。既存の辞書の候補の最後まで到達すると、独立した入力欄が現れ、そこで改めて複数語に分けるなどして目的の単語を入力しなおして確定すると、自動的に辞書に登録される。辞書にない特殊な単語や、1語のつもりで入力した複合語などが変換できなければ、ここで登録することで、次回以降の入力では存在する単語として変換が可能になる。通常のIMEでも「分けて変換」した履歴からある程度学習されるかもしれないが、SKKほど明示的で確実な動作ではなく、お祈り要素が含まれてしまう。

![入力欄の「がくいき」の下の独立窓に「[登録]がくいき: 学▼域」と表示されている。](userdict.png "電通大用語である「学域」を登録している様子。「域」を個別に変換中")

自分は「慣れ」に頼る製品があまり好きではないので、「慣れれば便利」は欠陥品を意味すると思っているが、SKKの「慣れ」への依存度は通常のIMEよりも低いと考えられる。既に慣れてしまっているから分からないだけで、形態素解析のクセを考慮していい感じに一発変換してくれそうなタイミングを見極める、なんていうのは職人技の儀式である。iOSユーザの方なら、IMEが「バカになる」だけで入力が劇的に不便になり、「慣れ直す」ことを強いられる苦痛を御存じの方もいるだろう。SKKは知能を持たない純粋な機械であるため、そんなことは起こらない。理解不能な行列演算に想いを馳せる必要はなく、漢字の形と送り仮名だけ知っていれば、あとはいつもよりちょっと多めにShiftキーを押すだけである。(なお、SKKはタッチパネルの絶望的な操作性とは相性が悪いため、iOSは救えない。)

SKKのWindows向けの実装はいくつかあるが、現在最も主流と言えるものは[CorvusSKK](https://github.com/nathancorvussolis/corvusskk)であり、今回はこれを導入した。インストールは`winget install corvusskk`でOK。非純正のIMEというと冒頭に述べたように不安定さが気になるが、自分の環境では今のところ非常に安定して動作している。他には[SKKIME](http://coexe.web.fc2.com/skkime.html)(開発終了)や[SKK日本語入力FEP](http://coexe.web.fc2.com/skkfep.html)(しばらく更新されていない)などがある。

SKKの小さな利点として、どのような実装でも(独自拡張を除き)使い心地が大きく変わらないことが挙げられる。形態素解析や学習などの不安定要素が存在せず、再現性のある動作のみで完結しているためである。WindowsではCorvusSKK、LinuxではFcitx5-SKK、macOSではAquaSKKやmacSKK、などと複数OSを横断してもほぼ同じように日本語入力ができる。

懸念点としては、候補を選ぶためには画面を見る必要があるため、キーボードを見ないと打てない人の場合、変換の頻度が多いSKKではキーボードと画面とで頻繁に視線移動が生じてしまう点がある。そういう人はまとめて変換することのできる通常のIMEの方が向いているかもしれない。

## モード遷移について

SKKはそのモードの多さによって学習コストが高いとされることもあるが、実はそんなに複雑でもない。そもそもSKKのSは「Simple」のSである。

まずは比較対象のMS-IMEに目を向けてみる。タスクバーの「あ」とか「A」とかを右クリックしてみると、「ひらがな」「全角カタカナ」「全角英数字」「半角カタカナ」「半角英数字」の5つのモードがあることが分かる。しかし、ほとんどの場合、実際には「ひらがな」と「半角英数字」との間を行き来するだけである。全角カタカナはひらがなで入力してからF7キー、半角カタカナは同じくF8キーを押せばよく、全角英数字はそもそも入力しない。

CorvusSKKにも「ひらがな」「カタカナ」「半角カタカナ」「全角英数字」「ASCII」の5つのモードと「IME OFF」があるが、同様に全てを使わなければいけないわけではなく、「ひらがな」と「ASCII」または「IME OFF」の2つで十分生活できる。明示的に変換を開始する必要があるという違いこそあれど、全角カタカナはQキー、半角カタカナはCtrl+Qキーで変換できる。「ひらがな」と「IME OFF」の間は任意に設定したキーで切り替えたりトグルしたりできる。既定の設定ではないが、もちろん英数キーでのトグルを追加することもできる(後述)。

残りの「カタカナ」「半角カタカナ」「全角英数字」への遷移も大して難しくはないため、使いたければ使ってみるのも悪くはない。変換する時に使うキーと同じなため、後から変換する操作に慣れた状態ならば、それを押すタイミングを先にするだけである。ただ、連続でこれらを入力したい場面はあまりなく、MS-IME同様、モード遷移の存在を忘れても大きな支障はない。

なお、IME OFFと「ASCII」モードとの違いはほとんど無く、キー入力がCorvusSKKの管理下にあるかどうかというだけのように見える。IME OFFでは「キー0」で設定するキー([OSに登録しておくキー?](https://github.com/nathancorvussolis/corvusskk/issues/26#issuecomment-1206350642))以外でIMEを有効化することはできないが、「ASCII」モードでは他のモードと同じキー設定が反映される。しかし、Qキーを押してもカタカナには遷移せず`q`が入力されるし、Ctrl+Jキーは押しにくくて使わないので、できることはあまり変わらなさそうである。何か押しやすい非文字キーに「ひらがな」を割り当てている状態なら「ASCII」モードを使う意味はあるかもしれない。

## abbrevモード

MS-IMEと明らかに異なる機能(ほかのIMEはどうなんだろう?)として、abbrevモードがある。モードとは言うものの上記のように遷移するモードではなく、かなモードから一時的に入ることができるモードである。abbreviationの名の通り英略語を展開できるモードと説明されるが、実際には変換元がひらがなではなくローマ字であるというだけで、辞書に基いて変換するという動作は通常と変わらない。既定ではスラッシュキーを押すことでabbrevモードが始まる。

例えば、`/uec`と入力してスペースキーを押すと「電通大」や「電気通信大学」に「変換」される。また、`/internet`から「インターネット」など、辞書にあれば「略語」に限らず「変換」できる。

これだけではあまり存在意義が分からないが、SKKのシームレスなユーザ辞書登録と組み合わせると、任意の略語を簡単に追加することもできる。たとえば`/ktr`と入力して変換を試みると候補がないためユーザ辞書登録が始まるが、ここで「京王帝都電鉄」を登録しておけば、次回からは`/ktr`だけで「京王帝都電鉄」に変換できるようになる。

さらに、特殊文字の類もひらがなから変換するより分かりやすく入力することができる。たとえば`/alpha`で「α」など記号入力に使うことができたり、後述するような設定を行えば絵文字まで入力できるようになる。また、特殊文字も略語と同様にユーザ辞書に登録することができる(入力にコピペを使う必要があるが)。LaTeXやTypstで数式入力する際にエディタの拡張機能に頼る必要がなくなるなど、応用範囲は広い。

また、単純に一時的な直接入力モードとしても使うことができる。モードを切り替えずに日本語の途中に英字を挟めるため、切替に押しにくい半角/全角キーを使っているような人はこちらの方が速いかもしれない。

## コツ

SKKは基本的に何も考えずに使うことができるが、少しだけ工夫の余地がある。

複合語、たとえば「送り仮名」「切り替え」などは、「切/り」と「替/え」とに分けて入力するよりも、「切り替/え」といっぺんに入力したほうが、Shiftを押す手間が減るほか、「か/え」のユーザ辞書を汚染しなかったり、「切り変え」のような誤変換を防ぐことができるなどの利点がある。

また、漢字単体でないと変換できなさそうな気がしてしまうが、そうでないかな混じりの単語、たとえば「ヤング率」「絶対パス」なども意外と一単語として変換することができる。特に固有名詞はそのまま載っていがち。Shiftはもちろん、Qキー→Shiftキーという小指の移動が防げるためかなり時短になる。

ただし、これらを意識しようとすると手書きの感覚とは異なってきて、少々思考力を奪われるため、一長一短といえる。

## 設定

自分が既定から変更している設定を紹介する。公式ドキュメントに全て説明があるが、用語が分かっていること前提で分かりにくい部分もあるため、参考になれば幸いである。

設定画面はスタートメニューのCorvusSKK/CONFIGか、入力欄にフォーカスした状態でタスクバーのモード表示を右クリックで開ける。先ほど実装間で使い心地が大きく変わらないと述べたが、設定画面についてはかなり差があり、CorvusSKKはすべての設定がGUIで行えて分かりやすいのに対し、たとえば`fcitx5-skk`では必要最低限の設定しかGUIにはないうえに、設定ファイルをしばこうにもドキュメントがなく分かりにくい。

### 辞書

標準でも簡易的な辞書は入っているらしいが、他環境と揃える意味でも公開されている辞書を追加しておく。

「辞書1」の「URL追加」から以下を追加し「取込」する。この選択は[提供元のページ](https://skk-dev.github.io/dict/)を参考にしている。上記で「変換できる」としたものはこれらの辞書(特にL辞書)を前提としたものである。

- https://skk-dev.github.io/dict/SKK-JISYO.L.gz
- https://skk-dev.github.io/dict/SKK-JISYO.jinmei.gz
- https://skk-dev.github.io/dict/SKK-JISYO.geo.gz
- https://skk-dev.github.io/dict/SKK-JISYO.propernoun.gz
- https://skk-dev.github.io/dict/SKK-JISYO.station.gz

また、絵文字を入力したい場合は以下も追加する。活かす方法は後述。

- https://raw.githubusercontent.com/uasi/skk-emoji-jisyo/master/SKK-JISYO.emoji.utf8

### 変換動作

SKKの変換は単純処理ではあるが、それでもいくつか動作のバリエーションが存在する。

「動作1」の「送り仮名が一致する候補を優先する」にチェックを入れる。これで変換時に送り仮名も考慮されるようになり、「多く」が「大く」になったり、「大きい」が「多きい」になったりするような誤変換が減る。逆に、チェックを入れないと「多く」とか「大きい」とか入力する度に一発変換に失敗することになる。

### 変換候補表示

変換候補や補完の表示について設定する。

「表示1」の「候補一覧のフォント」を`Yu Gothic UI`に変更する。これで周囲のUIと統一感のある表示になる。

「候補一覧表示に要する変換回数」を`2`にする。これで、一発変換できなかった際の2回目のスペースキー押下で候補一覧が表示されるようになる。

### 補完表示

ユーザ辞書に登録された語(変換確定したことのある語)を補完表示する機能について設定する。

「動作2」で「複数補完/複数動的補完の表示数」を最大の`9`にする。入力中に認識できるかどうかは別として、多くて困ることはない。

「複数動的補完を使用する」のチェックを入れる。他にも似たような機能があるが、「複数補完」では途中まで入力した状態でTabキーを押下するとポップアップで一覧が表示される。「動的補完」では入力するだけでインラインで補完が表示される。「複数動的補完」では入力するだけでポップアップで一覧が表示される。通常のIMEの動作に近いのが「複数動的補完」である。

「補完された見出し語の候補を表示する」のチェックを入れる。これは補完に変換後の文字列も表示する機能である。逆に、これなしでは見出し語(変換前の文字列)しか表示されない。また、これが有効でも、変換後の候補ではなく見出し語(変換前の文字列)単位で補完が表示され、候補は先頭の一つのみ表示される。Tabキーで選んだ後にスペースキーで変換するという流れになる。

### 入力モード表示

「表示2」の「入力モードを表示する」の時間を最大値の`60000` msにする。モードを切り替えなくても入力欄にフォーカスした時点で表示してほしい(古いMS-IMEやFcitx5ではできる)し、ずっと表示されていてくれてもいいくらいだが、切り替え時にしか表示されず、また、入力を開始すると時間にかかわらず消えてしまう。

### Sticky Shift

SKKではShiftキーを多用するが、Shiftキーを押しながらでは押しにくいキーも存在する。そこで、Shift+文字以外にも変換位置を指定するキーを追加する。設定の「キー1」で「変換位置」に`;`を割り当てる。これで;キー単押し→文字でShift+文字と同じ動作になる。

なお、スペースキーをShiftキーの代わりに使うSandSという方法もあり、これは[追加のソフト](https://github.com/fiore57/SandSExe)によって実現できるが、親指は他の指と構造が異なり小指よりも疲れやすいようで、少なくとも自分にとっては逆効果だった。

### モード遷移

「キー0」のONとOFF両方に仮想キー`0xF0`を追加する。これでMS-IME同様英数キーでもIMEのON/OFFができるようになる。別にトグルが好きなわけではないのだが、IME ON/OFFを変換キー/無変換キーでするのはキーボードによって微妙に場所が異なって嫌なため、MS-IMEでは英数キーでのトグルを使っていた。ちなみに、最近のキーボードではスペースキーの左右が変換キー/無変換キーではなくIME ONキー/IME OFFキーになっているものもあるらしい。果たして場所は統一されてくれるのだろうか。

ここまでMS-IMEに合わせトグル操作を基本としてきたが、SKKではひらがな/直接入力をCtrl+Jキー/Lキーで行うのが主流である(元ネタのEmacs的な操作なんだろうか?)。しかし、IME切替だけに2キー必要なのは受け入れ難い。そこで、両者の間を取ってひらがな/ASCIIを英数キー/Lキーとすることを考えている。ただ、「英数」に「ひらがな」を割り当てるというのはかなり絵面が悪いのと、CorvusSKKのバグかCtrl+J以外を「ひらがな」に割り当ててもASCIIモード以外で機能しないため実行していない。

### ひらがなモードでのASCII文字を半角にする

既定では、ひらがなモードで「!」や「?」を入力すると全角になってしまう。他の文字は半角で入力されるので一貫性がない。全角ASCII文字は滅びるべきとされているため、修正する。

「仮名」の「ローマ字・仮名変換表」で`!`と`?`に対応する「かな」「カナ」をそれぞれ半角の`!`と`?`に変更する。また、全角の「！」や「？」を打つのにいちいち全角英数モードに入るのは面倒なので、`z!`と`z?`を作成して全角版を割り当てておく。

ついでに`va`から`vo`と`xva`から`xvo`のかなの「う゛」と「ゔ」とを入れ替えておく。Shift_JISには「ゔ」が存在しないためかMS-IMEやCorvusSKKの既定では「う゛」が優先されるが、今はUnicodeの時代である。積極的に排除すべきれがしぃ環境に気を使ってやる必要はない。

「ファイル書出」からかなテーブル形式でエスクポートし、それを編集して「ファイル読込」したほうが楽かもしれない。以下にコピペ用に変更部分だけ抜粋しておく。

```
va	ゔぁ	ヴァ	ｳﾞｧ	0
vi	ゔぃ	ヴィ	ｳﾞｨ	0
vu	ゔ	ヴ	ｳﾞ	0
ve	ゔぇ	ヴェ	ｳﾞｪ	0
vo	ゔぉ	ヴォ	ｳﾞｫ	0
xva	ゔぁ	ヷ	ﾜﾞ	0
xvi	ゔぃ	ヸ	ｲﾞ	0
xvu	ゔ	ヴ	ｳﾞ	0
xve	ゔぇ	ヹ	ｴﾞ	0
xvo	ゔぉ	ヺ	ｦﾞ	0

!	!	!	!	0
z!	！	！	!	0

?	?	?	?	0
z?	？	？	?	0
```

### 絵文字

DiscordなどのSNSでは、たとえば`:interrobang:`のような文字列を入力することで「⁉️」のような絵文字を出すことができる。また、適切に補完が表示されるため、もとの文字列を一言一句覚える必要はない。SKKでも[skk-emoji-jisyo](https://github.com/uasi/skk-emoji-jisyo)を追加することで、abbrevモードで絵文字を打つことができる。しかし、CorvusSKKでは一度変換した語(ユーザ辞書に登録された語)に対しては補完が表示されるが、一度も変換していなければ出てこないため、最初の一歩が踏み出しづらい。

![`:bang`と入力した上に`:interrobang:`と`:bangbang`の予測が表示されている。](discord.png "Discordでの絵文字入力")

そこで、ユーザ辞書に一括で登録してしまうことで、初めて打つ絵文字であっても補完が出るようにする。メモリ上の辞書に上書きされないように辞書管理プロセスを終了してから、ユーザ辞書に絵文字辞書の内容をまるっと追記する。辞書管理プロセスは必要なタイミングで自動的に再起動される。

```powershell
taskkill /im imcrvmgr.exe
curl.exe https://raw.githubusercontent.com/uasi/skk-emoji-jisyo/master/SKK-JISYO.emoji.utf8 >> $env:APPDATA\CorvusSKK\userdict.txt
```

前方一致でしか補完は出ないが、最初の数文字だけ覚えてしまえば打つことができる。

![`int`と入力した上に`interrobang`の予測が表示されている。](skk.png "CorvusSKKでの絵文字入力")

### SKK辞書サーバ

skkservと呼ばれるプロトコルがあり、辞書ファイルを読み込む以外に辞書サーバに問い合わせることでも辞書を取得することができる。辞書サーバの一種として、CorvusSKKと同じ作者による[crvskkserv](https://github.com/nathancorvussolis/crvskkserv)が存在する。このサーバは辞書ファイルや別の辞書サーバのほか、Google CGI API for Japanese Inputなるものに対応しており、Google日本語入力と同じ(?)候補を取得できる。つまり、最終手段として形態素分析に頼ることができる。

一見便利なように思えたが、設定する環境としていない環境とを用意して比較してみたところ、無くても全く困らなかったため、現在は使用していない。

## あとがき

最後までお読みいただきありがとうございました。まーた逆張りヲタクが騒いでるだけでしょ、とスルーしてしまいそうになるSKKでしたが、実際に使ってみると、この手のアプリケーションにしては珍しく、きちんと実用性を備えていることが分かりました。複数OSを横断して使っている人や現状のIMEに不満がある人はもちろん、IMEなんて何でもいいでしょ、と思っている人も是非試してみましょう。特に、CorvusSKKは安定しているうえ設定も分かりやすいため、多少困ったことがあってもすぐに自分好みにしばき倒しやすいです。

UEC Advent Calendar 2025 11日目の記事は、多田さんの『なにかしらの考察か、人生か生活のtipsを書こうかな。』です。