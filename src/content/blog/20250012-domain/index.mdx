---
publish: false
title: "すでに運用中のCloudflare Pagesのサイトを独自ドメインに移行してみた"
publishDate: 2025-12-31 17:45:00 +09:00
description: ""
---

## ドメイン購入

-shi -ku

英数字IDとして主に使用している「DG-7D」に合わせることと、できるだけ短くすることを考慮し、`dg7.dev`とした。普通に既存のCloudflareのアカウントで購入した。カードはKyashが使えた。

[公式FAQ](https://www.cloudflare.com/ja-jp/plans/faq/#:~:text=%E8%AB%8B%E6%B1%82%E6%97%A5%E3%81%AF%E3%81%84%E3%81%A4%E3%81%A7%E3%81%99%E3%81%8B%EF%BC%9F)には「はじめて支払プランを選択された日の日付が、毎月の請求日になります」とあったが、中途半端な日付で請求されても気持ち悪いので、月始めに購入した。12月1日の午前8時に購入したところ、「2026年11月1日 に更新」と表示され、てっきりUTCでは11月だったために11月始まりになってしまった(30日分くらい無駄になった)のかと思ったが、この「更新」はドメインの有効期限の30日前(31日と1日の人がいたので恐らくそう)となるだけで、有効期限はきっかり1年の2026年12月1日だった。

## Cloudflare Pagesの設定

`dg7.dev`からCloudflare Pagesでホストしているサイトにアクセスできるようにするためには、[公式ドキュメント](https://developers.cloudflare.com/pages/configuration/custom-domains/)に従って設定すればよい。CNAMEが自動で設定されるが、これだけでは従来の`azumino.pages.dev`も同時に存在する状態になってしまう。同ドキュメントでは`*.pages.dev`へのアクセスを要認証にするかリダイレクトを設定するかが選択肢として挙げられているが、今回は新規サイトではなく既存サイトの移行であるため、後者を選択した。

リダイレクトについては検索すると「ルール」のほうを使う記事も出てくるが、公式ドキュメントに従い[一括リダイレクト(Bulk Redirects)](https://developers.cloudflare.com/rules/url-forwarding/bulk-redirects/)を使用した。ドメインごとのダッシュボードではなくアカウント全体のダッシュボードのほうにある。詳細な手順は画面に従うだけなので割愛する。ステータスは恒久な移動を示す301、クエリ文字列は保持、サブドメインは含めず(dev環境は残す)、サブパスは一致させ、パスサフィックスは保持する。

## 検索サイトの設定

Google Search Console→Cloudflareで認証
認証した後戻されるが戻ってもう一度

BingSiteAuth 使い回し

Crawler Hints

## Email Routing

メール ダメそう
